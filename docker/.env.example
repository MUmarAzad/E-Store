# ================================
# Docker Compose Environment Variables
# ================================
# Copy this file to .env and update with your actual values
# File: docker/.env

# ================================
# Project Configuration
# ================================
COMPOSE_PROJECT_NAME=estore

# ================================
# MongoDB Configuration
# ================================
# Root user credentials (used for database administration)
MONGO_ROOT_USERNAME=admin
MONGO_ROOT_PASSWORD=change-this-strong-password-123

# Database initialization
MONGO_INITDB_ROOT_USERNAME=admin
MONGO_INITDB_ROOT_PASSWORD=change-this-strong-password-123

# MongoDB connection string (used by services)
# For Docker: mongodb://username:password@mongodb:27017/
# For Atlas: mongodb+srv://username:password@cluster.mongodb.net/

# ================================
# Redis Configuration
# ================================
# Redis password (leave empty for development, set for production)
REDIS_PASSWORD=change-this-redis-password

# ================================
# JWT Secrets
# ================================
# IMPORTANT: Generate strong random strings for production
# Example: openssl rand -base64 64
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-long
JWT_REFRESH_SECRET=your-super-secret-refresh-key-minimum-32-characters-long
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ================================
# Service Ports (customize if needed)
# ================================
GATEWAY_PORT=4000
FRONTEND_PORT=5173
USER_SERVICE_PORT=3000
PRODUCT_SERVICE_PORT=3001
CART_SERVICE_PORT=3002
ORDER_SERVICE_PORT=3003

# NGINX ports
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# Database and cache ports
MONGO_PORT=27017
REDIS_PORT=6379

# Admin tool ports (development only)
MONGO_EXPRESS_PORT=8081
REDIS_COMMANDER_PORT=8082

# ================================
# SSL Configuration (Production Only)
# ================================
# Your domain name
DOMAIN_NAME=yourdomain.com
ADMIN_EMAIL=admin@yourdomain.com

# SSL certificate paths (relative to docker-compose.prod.yml)
SSL_CERT_PATH=./docker/nginx/ssl/cert.pem
SSL_KEY_PATH=./docker/nginx/ssl/key.pem

# Let's Encrypt settings
LETSENCRYPT_EMAIL=admin@yourdomain.com
LETSENCRYPT_DOMAIN=yourdomain.com

# ================================
# Email Configuration (SMTP)
# ================================
# Gmail example (requires App Password)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-gmail-app-password

# SendGrid example
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASS=your-sendgrid-api-key

# Email settings
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME=E-Store

# ================================
# Cloudinary Configuration (Image Upload)
# ================================
CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-api-key
CLOUDINARY_API_SECRET=your-api-secret

# ================================
# Stripe Configuration (Payment Processing)
# ================================
# Test keys (start with sk_test_ and pk_test_)
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Production keys (use in production environment)
# STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key
# STRIPE_PUBLISHABLE_KEY=pk_live_your_stripe_publishable_key
# STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# ================================
# Frontend Configuration
# ================================
VITE_API_URL=http://localhost:4000/api
VITE_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key

# ================================
# Node Environment
# ================================
NODE_ENV=development
# For production: NODE_ENV=production

# ================================
# Rate Limiting
# ================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_AUTH_MAX=10

# ================================
# Session Configuration
# ================================
SESSION_SECRET=your-session-secret-minimum-32-characters-long
SESSION_MAX_AGE=86400000

# ================================
# CORS Configuration
# ================================
CORS_ORIGIN=http://localhost:5173,http://localhost:3000
# For production, set to your actual frontend domain
# CORS_ORIGIN=https://yourdomain.com

# ================================
# Logging
# ================================
LOG_LEVEL=info
# Options: error, warn, info, http, verbose, debug, silly

# ================================
# Resource Limits (Production)
# ================================
# CPU limits (1.0 = 1 CPU core)
API_GATEWAY_CPU_LIMIT=1.0
SERVICE_CPU_LIMIT=0.5

# Memory limits (in MB)
API_GATEWAY_MEMORY_LIMIT=512M
SERVICE_MEMORY_LIMIT=256M

# ================================
# Database Configuration
# ================================
# Connection pool sizes
MONGODB_MAX_POOL_SIZE=10
MONGODB_MIN_POOL_SIZE=2

# Redis configuration
REDIS_MAX_RETRIES=3
REDIS_CONNECT_TIMEOUT=10000

# ================================
# Feature Flags (Optional)
# ================================
ENABLE_SWAGGER=true
ENABLE_RATE_LIMITING=true
ENABLE_CORS=true
ENABLE_COMPRESSION=true

# ================================
# Monitoring & Analytics (Optional)
# ================================
# Sentry for error tracking
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx

# Google Analytics
# GA_TRACKING_ID=UA-XXXXXXXXX-X

# ================================
# Backup Configuration (Optional)
# ================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_S3_BUCKET=your-backup-bucket

# ================================
# Notes:
# ================================
# 1. NEVER commit the .env file with real secrets to version control
# 2. Use strong, random passwords for production
# 3. Generate JWT secrets using: openssl rand -base64 64
# 4. For Gmail SMTP, use App Passwords: https://myaccount.google.com/apppasswords
# 5. Update CORS_ORIGIN to match your frontend domain in production
# 6. Set NODE_ENV=production for production deployments
# 7. Enable HTTPS in production with valid SSL certificates
